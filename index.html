<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Chrome Inspector Detector</title>
        <style>
            * {
                font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
                margin: 0
            }

            message {
                position: fixed;
                color: #444;
                font-size: 20px;
                width: 420px;
                text-align: left;
                margin-left: -210px;
                left: 50%;
                top: 50%;
                margin-top: -50px;
                z-index: 9
            }

            instructions {
                font-size: 150%
            }

            status green {
                color: green
            }

            status red {
                color: red
            }

            supplemental {
                font-size: 75%;
            }

            #retweet_button {
                position: fixed;
                bottom: 30px;
                left: 50%;
                width: 100px;
                margin-left: -100px;
            }

            credits {
                position: fixed;
                bottom: 35px;
                left: 50%;
                width: 130px;
                font-size: 13px;
                color: #aaa;
            }

            credits a, credits a:link, credits a:visited {
                color: #aaa;
                text-decoration: none;
            }

            credits a:hover {
                text-decoration: underline;
                color: #444;
            }

            html, body {
                overflow: hidden;
                height: 100%
                width: 100%;
            }

            clouds {
                height: 100%;
                position: absolute;
                width: 100%;
                box-sizing: border-box;
                background: -webkit-linear-gradient(top, #c9dbe9 0%, #fff 100%);
                opacity: 0;
                -webkit-transition: opacity 1s;
                display: block;
                overflow: hidden;
            }

            clouds.visible {
                opacity: 1;
            }

            cloud {
                width: 200px;
                height: 60px;
                background: #fff;
                -webkit-border-radius: 200px;
                position: absolute;
                display: block;
                left: 0px;
                top: 20%;
                margin-left: 120%;
            }

            cloud:before, cloud:after {
                content: '';
                position: absolute;
                background: #fff;
                width: 100px;
                height: 80px;
                top: -15px;
                left: 10px;
                -webkit-border-radius: 100px;
                -webkit-transform: rotate(30deg)
            }

            cloud:after {
                width: 120px;
                height: 120px;
                top: -55px;
                left: auto;
                right: 15px
            }

            .x1 {
                top: 40%;
                opacity: 0.95;
                -webkit-animation: moveclouds 30s linear infinite;
            }

            .x2 {
                left: 200px;
                top: 30%;
                -webkit-transform: scale(0.6);
                opacity: 0.6;
                -webkit-animation: moveclouds 50s linear infinite;
            }

            .x3 {
                left: 300px;
                top: 10%;
                -webkit-transform: scale(0.8);
                opacity: 0.8;
                -webkit-animation: moveclouds 40s linear infinite;
            }

            .x4 {
                left: 600px;
                top: 24%;
                -webkit-transform: scale(0.75);
                opacity: 0.75;
                -webkit-animation: moveclouds 36s 18s linear infinite;
            }

            .x5 {
                left: 200px;
                top: 29%;
                -webkit-transform: scale(0.4);
                opacity: 0.8;
                -webkit-animation: moveclouds 80s linear infinite;
            }

            @-webkit-keyframes moveclouds {
                0% {
                    margin-left: 120%;
                }
                100% {
                    margin-left: -60%;
                }
            }
        </style>
    </head>
    <body>
        <message>
            <instructions>&nbsp;</instructions>
            <br><br>
            Chrome Inspector State: <status></status>
            <br><br>
            <supplemental></supplemental>
        </message>

        <!-- Thanks http://thecodeplayer.com/walkthrough/pure-css3-animated-clouds-background -->
        <clouds>
            <cloud class="x1"></cloud>
            <cloud class="x2"></cloud>
            <cloud class="x3"></cloud>
            <cloud class="x4"></cloud>
            <cloud class="x5"></cloud>
        </clouds>

        <script src="chrome.inspector-detector.js"></script>
        <script>
            (function(){
                if (/Mac OS/.test(navigator.appVersion)) {
                    document.getElementsByTagName('instructions')[0].innerHTML = 'Press ⌘ + ⌥ + I'
                } else {
                    document.getElementsByTagName('instructions')[0].innerHTML = 'Press Ctrl + Shift + I'
                }

                var getZoom = function() {
                    return document.width / (document.body.clientWidth + parseInt(getComputedStyle(document.body)['margin-left'], 10) + parseInt(getComputedStyle(document.body)['margin-left'], 10));
                };

                var detect = function() {
                    var zoom = getZoom(),
                        detector = chrome.inspector.detector(),
                        clouds = document.getElementsByTagName('clouds')[0],
                        status = document.getElementsByTagName('status')[0],
                        supplemental = document.getElementsByTagName('supplemental')[0],
                        wait = detector.open ? 1500 : 100
                    ;
                    status.innerHTML = detector.open ? '<green>Open</green>' : '<red>Closed</red>';
                    if (detector.open) {
                        status.innerHTML += ' and ' + (detector.docked ? '<green>Docked</green>' : '<red>Undocked</red>');
                    }
                    clouds.className = detector.open ? 'visible' : '';
                    if (zoom === 1) {
                        supplemental.innerHTML = '';
                    } else {
                        supplemental.innerHTML = 'Browser zoom: ' + (zoom + '').substr(0, 5);
                    }
                    setTimeout(detect, wait);
                };
                detect();
            })();
        </script>

        <!-- GitHub -->
        <a href="https://github.com/adamschwartz/chrome-inspector-detector"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>

        <!-- Share -->
        <div id="retweet_button">
            <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://adamschwartz.co/chrome-inspector-detector/" data-text="Chrome Inspector Detector tells you when the Chrome inspector is open. By @adamfschwartz." data-count="horizontal" data-related="adamfschwartz">Tweet</a>
            <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
        </div>

        <credits>
            By <a href="http://adamschwartz.co">Adam Schwartz</a>
        </credits>

        <!-- Google Analytics -->
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-400802-11']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </body>
</html>